<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
    <title>CBDC - APP</title>
    <link rel="stylesheet" href="../shared/ui/assets/styles/common.css">
    <link rel="stylesheet" href="../shared/ui/assets/styles/style.css">
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <script type="text/javascript" src="../shared/ui/assets/js/app.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.8/lottie.min.js"></script>

    <!-- LottieFiles 웹 플레이어 -->
    <!-- <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script> -->

    <script>
        $(window).ready(function(){

            var animation = "";

            textSttus(1);

            $("#confirm-btn").click(function(){
                textSttus(2);
                $("#confirm-btn-area").addClass("hide");
                $(".result-area").removeClass("hide");
                animation = lottie.loadAnimation({
                    container: document.getElementById('lottieA'), // the dom element
                    renderer: 'svg',
                    loop: 2,
                    autoplay: true,
                    path: '../shared/ui/assets/styles/img/lottie/blockchain_4.json' // the path to the animation json
                });
                animation.addEventListener('complete', function() {
                    $("#lottieA").remove();
                    console.log("Animation completed!");
                     animation2 = lottie.loadAnimation({
                        container: document.getElementById('lottieB'), // the dom element
                        renderer: 'svg',
                        loop: false,
                        autoplay: true,
                        path: '../shared/ui/assets/styles/img/lottie/offRamp_3.json' // the path to the animation json
                    });
                    animation2.addEventListener('complete', function() {
                        textSttus(3);
                        $("#lottieB").remove();
                        $(".exc-result").removeClass("hide");
                        $("#result-btn-area").removeClass("hide");

                        console.log("Animation completed!");
                        animation2 = lottie.loadAnimation({
                            container: document.getElementById('lottieC'), // the dom element
                            renderer: 'svg',
                            loop: false,
                            autoplay: true,
                            path: '../shared/ui/assets/styles/img/lottie/checking_2.json' // the path to the animation json
                        });
                    });
                });
            });


            // $('#confirm-btn').click(function() {
            //     animation.play();
            // });

        });

        function textSttus(step){
            let text = "";
            switch(step){
                case 1:
                text = "결제하시겠습니까?";
                break;

                case 2:
                text = "충전하고있어요.";
                break;

                case 3:
                text = "충전하였습니다.";
                break;
            }
            $("#textSttus").html(text);
        }
    </script>
</head>
<body class="NHB">
    <div class="wrap bgw">
        <div class="sub-top">
            <h2>&nbsp;</h2>
            <button type="button" onclick="location.href='exChange.html'" class="btn back-btn">
                <span>뒤로가기</span>
            </button>
        </div>
        <div class="content sub">
            <!--NEW : pay-confirm 추가-->
            <div class="sub-desc exc-confirm pay-confirm">
                <p>
                    <b>현대홈쇼핑</b> 에서
                    <span class="token">예금토큰</span>
                    <span class="amount">20,000원</span>
                    <span id="textSttus"></span>
                </p>
            </div>
            <div class="pay-benefit-area">
                <div class="pay-benefit-box">
                    <h3>혜택 적용 선택</h3>
                    <ul>
                        <li>
                            <button type="button" class="rdo-btn selected">적용안함</button>
                        </li>
                        <li>
                            <button type="button" class="rdo-btn">
                                11% 캐시백 상품권
                                <span>최소 1만원 이상 결제 시 사용 가능</span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="rdo-btn disabled" disabled>
                                [사용불가] 캐시백 상품권 5,000원 
                                <span>최소 5만원 이상 결제 시 사용 가능</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="detail-area">
                <div class="detail-box">    
                    <div class="detail-info mt0">
                        <h3>결제 상세</h3>
                        <ul>
                            <li>
                                <div class="repay-amount">
                                    <span>결제 예금토큰</span>
                                    <p>20,000원</p>
                                </div>
                            </li>
                            <li>
                                <div class="repay-amount">
                                    <span>캐시백(환급 예정)</span>
                                    <p class="point">적용안함</p>
                                </div>
                            </li>
                            <!--NEW : totale-->
                            <li class="total">
                                <div class="repay-amount">
                                    <span>최종 혜택가</span>
                                    <p>20,000원</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <p class="info-txt">캐시백 상품권 사용 시, 결제 후 상품권 금액만큼 예금 토큰으로 추후 환급해 드립니다.</p>
                </div>
            </div>
          
        </div>
        <div class="btm-btn-area">
            <button type="button" class="btm-btn app">결제하기</a>
        </div>
    </div>
</body>
</html>


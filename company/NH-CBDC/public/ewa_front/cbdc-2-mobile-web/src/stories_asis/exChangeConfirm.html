<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
    <title>CBDC - APP</title>
    <link rel="stylesheet" href="../shared/ui/assets/styles/common.css">
    <link rel="stylesheet" href="../shared/ui/assets/styles/style.css">
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <script type="text/javascript" src="../shared/ui/assets/js/app.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.8/lottie.min.js"></script>

    <!-- LottieFiles 웹 플레이어 -->
    <!-- <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script> -->

    <script>
        $(window).ready(function(){

            var animation = "";

            textSttus(1);

            $("#confirm-btn").click(function(){
                textSttus(2);
                $("#confirm-btn-area").addClass("hide");
                $(".result-area").removeClass("hide");
                // animation = lottie.loadAnimation({
                //     container: document.getElementById('lottieA'), // the dom element
                //     renderer: 'svg',
                //     loop: 2,
                //     autoplay: true,
                //     path: '../shared/ui/assets/img/lottie/blockchain_4.json' // the path to the animation json
                // });
                // animation.addEventListener('complete', function() {
                //     $("#lottieA").remove();
                //     console.log("Animation completed!");
                //      animation2 = lottie.loadAnimation({
                //         container: document.getElementById('lottieB'), // the dom element
                //         renderer: 'svg',
                //         loop: false,
                //         autoplay: true,
                //         path: '../shared/ui/assets/img/lottie/offRamp_3.json' // the path to the animation json
                //     });
                //     animation2.addEventListener('complete', function() {
                //         textSttus(3);
                //         $("#lottieB").remove();
                //         $(".exc-result").removeClass("hide");
                //         $("#result-btn-area").removeClass("hide");

                //         console.log("Animation completed!");
                //         animation2 = lottie.loadAnimation({
                //             container: document.getElementById('lottieC'), // the dom element
                //             renderer: 'svg',
                //             loop: false,
                //             autoplay: true,
                //             path: '../shared/ui/assets/img/lottie/checking_2.json' // the path to the animation json
                //         });
                //     });
                // });

                    $("#on-ramp-mov").get(0).play();

                    var chkMov = setInterval(function(){
                        if($("#on-ramp-mov").prop("ended")){
                            clearInterval(chkMov);
                            textSttus(3);
                            $("#on-ramp-mov-box").remove();
                            $(".exc-result").removeClass("hide");
                            $("#result-btn-area").removeClass("hide");
                            console.log("Animation completed!");
                            animation = lottie.loadAnimation({
                                container: document.getElementById('lottieC'), // the dom element
                                renderer: 'svg',
                                loop: false,
                                autoplay: true,
                                path: '../shared/ui/assets/img/lottie/checking_2.json' // the path to the animation json
                            });
                        }
                    },200);

            });


            // $('#confirm-btn').click(function() {
            //     animation.play();
            // });

        });

        function textSttus(step){
            let text = "";
            switch(step){
                case 1:
                text = "충전하시겠습니까?";
                break;

                case 2:
                text = "충전하고있어요.";
                break;

                case 3:
                text = "충전하였습니다.";
                break;
            }
            $("#textSttus").html(text);
        }
    </script>
</head>
<body class="AAA">
    <div class="wrap bgw">
        <div class="sub-top">
            <h2>&nbsp;</h2>
            <button type="button" onclick="location.href='exChange.html'" class="btn back-btn">
                <span>뒤로가기</span>
            </button>
        </div>
        <div class="content sub">
            <div class="sub-desc exc-confirm">
                <p>
                    <!-- 예금 토큰 | 신한 에서<br/>
                    이머니 토큰 | 신한 으로 -->
                    김한국님 에게<br/>
                    <button type="button" class="wallet-account dark no-btn AAA">A은행 123-456-789-0</button>
                    <span class="token">예금토큰</span>
                    <span class="amount">10,000원</span>
                    <span id="textSttus"></span>
                </p>
            </div>
            <div class="result-area">
                <div class="process">
                    <!-- <img src="../shared/ui/assets/img/mp4/TD-OnRamp-unscreen.gif"> -->
                    <div class="process-mov" id="on-ramp-mov-box">
                        <video id="on-ramp-mov">
                            <source src="../shared/ui/assets/img/mp4/off_ramp.mp4" type="video/mp4" />
                        </video>
                    </div>
                    <!-- <div id="lottieA"></div>
                    <div id="lottieB"></div> -->
                    <div id="lottieC"></div>
                </div>
                <div class="exc-result hide">
                    <!-- <div class="exc-result-list">
                        <ul>
                            <li class="exc-type">
                                <span>거래 구분</span>
                                <b>충전</b>
                            </li>
                            <li class="exc-type">
                                <span>이용 토큰</span>
                                <b>예금토큰 | 신한</b>
                            </li>
                            <li class="exc-type ">
                                <span>수신인</span>
                                <div class="exc-trans">
                                    <div class="exc-trans-box to">
                                        <p>김한국</p>
                                        <span>국민 1234-1234-1234</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div> -->
                    <!-- <div class="exc-result-list">
                        <ul>
                            <li class="exc-info">
                                <span>충전 정보</span>
                                <div class="exc-trans">
                                    <div class="exc-trans-box from">
                                        <span>이용 예금</span>
                                        <p>예금토큰 | 신한</p>
                                    </div>
                                    <div class="exc-trans-arr">
                                        전송
                                    </div>
                                    <div class="exc-trans-box to">
                                        <span>이용 예금</span>
                                        <p>예금토큰 | 신한</p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div> -->
                    <div class="exc-result-list">
                        <ul>
                            <li class="exc-type">
                                <span>거래 구분</span>
                                <b>충전</b>
                            </li>
                            <li class="exc-type">
                                <span>이용 토큰</span>
                                <b>예금토큰 | 신한</b>
                            </li>
                            <li class="exc-type ">
                                <span>결제번호</span>
                                <b>123456789</b>
                            </li>
                        </ul>
                    </div>
                    <div class="detail-btm-info">
                        <!-- 혜택이 없는 경우 히든 처리 -->
                        <div class="pay-info-top">
                            <h3>적용혜택</h3>
                        </div>
                        <div class="pay-info-detail">
                            <ul>
                                <li>
                                    <span>한국사랑바우처 5,000원 사용</span>
                                </li>
                                <li>
                                    <span>예금토큰 적립 예정</span>
                                    <p>+5,000원</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <p class="trans-info">이용 내역 반영까지 최대 5분이 소요될 수 있습니다.</p>
                </div>
            </div>
        </div>
        <div class="btm-btn-area" id="confirm-btn-area">
            <button type="button" class="btm-btn app" id="confirm-btn">충전하기</a>
        </div>

        <div class="btm-btn-area confirm half hide" id="result-btn-area">
            <button type="button" class="btm-btn" onclick="location.href='historyAll.html'">전체 이용 내역 보기</a>
            <button type="button" class="btm-btn app" onclick="location.href='tokenDetail.html'">확인</a>
        </div>
    </div>

</body>
</html>

